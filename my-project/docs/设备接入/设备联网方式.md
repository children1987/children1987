# 设备联网方式

设备和云平台要实现通信，首先要确保设备可以连网，也就是让设备接入互联网，包括设备直接连网和通过父设备连网。介绍设备常用的几种联网方式：

## WiFi

通过WiFi芯片或模组，设备可以接入WiFi热点（AP），后者通常也是可以接入互联网或者私有网络的路由器，使得设备可以直接使用TCP/IP协议和云平台建立通信。

**提示：**值得注意的是，WiFi和以下几种连网方式，都属于链路层通信协议，它为设备和云平台建立通信管道，而在管道之上的数据通信协议，也就是后边提到的接入协议，可以有多种选择，比如 **MQTT** 、**HTTP** 、**TCP** 等，在其他章节会有介绍。

## 以太网

通过以太网接入互联网的方式很常见，就像传统的PC电脑通过网线接入路由器实现上网一样。以太网支持10M/100M/1000M 的传输速率，通过IP路由实现网络互通，最终速率受限于整条链路中最慢的交换节点。

## 蜂窝网络

蜂窝网络由运营商提供，设备通过集成通信模组来使用相应的网络。目前在中国主要使用2G/3G/4G/5G/NB-IOT几种蜂窝网络。

## 通过父设备

以上的几种连网方式，都是在设备上集成通信模组，使设备实现直接接入EZtCloud，这类设备我们称之为 [直接上网设备](EZtCloud%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%20d1128b61e6a54f2881b04d16d0e6803c.md)。除此之外，有些设备自身不具备上网能力，只能通过**父设备**接入EZtCloud，这类设备我们称之为 [间接上网设备](EZtCloud%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%20d1128b61e6a54f2881b04d16d0e6803c.md)。

在物联网领域中，网关通常扮演者父设备的角色，它的作用是将*间接上网设备*，通过父设备的中转，接入云平台。父设备起到的作用是数据转发和协议转换。

除了通信中转作用，父设备还具有另一个很重要的作用，那就是业务层的边缘计算，包括对设备的运维管理、联动控制、数据缓存等。

凡是实现以上作用的硬件或软件都可以称为***父设备***。

那些和父设备连接的设备，我们也称为子设备。在EZtCloud中，任何设备都可被作为父设备，即任何设备下，都可配置0个或N个子设备。而***直接上网设备***不可作为子设备。

那么，子设备和父设备都有哪些连接方式和通信协议呢？连接方式非常多，有线方式包括UART、USB、I2C、SPI、RS485、RS232、CAN、PROFIBUS、以太网、各类工业协议等，无线方式包括 WiFi、蓝牙、Zigbee、Lora、其它无线通信等。

以上这些都是链路层通信协议，在此之上，我们要知道消息包的数据格式，以及它们代表什么含义，我们还需要应用层通信协议，比如 Modbus、BACnet，以及一些工业级国标协议等。

## 通过DTU

DTU是Data Transfer Unit的简称，也就是数据传输单元。DTU就是一种典型的网关产品，它的特点在于面向用户的快速配置能力，部分DTU还支持可编程。DTU 将应用到更多的物联网场景中，成为一种开箱即用的硬件网关。

DTU同样也是使用前边提到的几种常用的连网方式，而DTU与云平台的接入方式，常见的是 ***MQTT 和 TCP***，这里的TCP方式更多是采用透传方式，也就是DTU 将子设备发来的消息不做任何业务层的处理，直接封装成TCP/IP消息包，转发给平台，同时也将平台下发的数据包，经过链路协议层的处理，转发给子设备。